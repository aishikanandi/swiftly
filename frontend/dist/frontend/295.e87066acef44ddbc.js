"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[295],{1295:(k,l,i)=>{i.r(l),i.d(l,{CountryModule:()=>j});var u=i(177),e=i(9417),t=i(7705),m=i(1626);let h=(()=>{class o{constructor(n){this.http=n,this.serverUrl="http://localhost:4000",this.countryAPI="https://restcountries.com/v3.1/all"}fetchCountryAPI(){return this.http.get(`${this.countryAPI}`)}addCountry(n){return this.http.post(`${this.serverUrl}/countryadd`,n)}getcountryData(){return this.http.get(`${this.serverUrl}/countrydata`)}searchCountry(n){return this.http.get(`${this.serverUrl}/searchcountry/`,{params:{search:n}})}static{this.\u0275fac=function(r){return new(r||o)(t.KVO(m.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var p=i(5794),f=i(6731),y=i(9213);function g(o,s){if(1&o&&(t.j41(0,"option",25),t.EFF(1),t.k0s()),2&o){const n=s.$implicit;t.R7$(1),t.JRh(n.name.common)}}function C(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",9)(1,"h2",10),t.EFF(2,"COUNTRY"),t.k0s(),t.j41(3,"form",11),t.bIt("ngSubmit",function(){t.eBV(n);const c=t.XpG();return t.Njj(c.OnSubmit())}),t.j41(4,"div",12)(5,"select",13,14),t.bIt("change",function(){t.eBV(n);const c=t.sdS(6),a=t.XpG();return t.Njj(a.onSelected(c.value))}),t.j41(7,"option",15),t.EFF(8,"Select Country"),t.k0s(),t.DNE(9,g,2,1,"option",16),t.k0s()(),t.j41(10,"div",10)(11,"label",17),t.EFF(12,"Country"),t.k0s(),t.nrm(13,"input",18),t.k0s(),t.j41(14,"div",10)(15,"label",17),t.EFF(16,"TimeZone"),t.k0s(),t.nrm(17,"input",19),t.k0s(),t.j41(18,"div",10)(19,"label",17),t.EFF(20,"Code"),t.k0s(),t.nrm(21,"input",20),t.k0s(),t.j41(22,"div",10)(23,"label",17),t.EFF(24,"Currency"),t.k0s(),t.nrm(25,"input",21),t.k0s(),t.j41(26,"div",10)(27,"label",17),t.EFF(28,"Flag"),t.k0s(),t.nrm(29,"img",22),t.k0s(),t.j41(30,"div")(31,"button",23),t.EFF(32," Add-country"),t.k0s(),t.j41(33,"button",24),t.bIt("click",function(){t.eBV(n);const c=t.XpG();return t.Njj(c.cancel())}),t.EFF(34," Cancel"),t.k0s()()()()}if(2&o){const n=t.XpG();let r;t.R7$(3),t.Y8G("formGroup",n.countryForm),t.R7$(6),t.Y8G("ngForOf",n.countryData),t.R7$(4),t.Y8G("readonly",n.AddbuttonForm)("value","countryname"),t.R7$(4),t.Y8G("readonly",n.AddbuttonForm)("value","countrytimezone"),t.R7$(4),t.Y8G("readonly",n.AddbuttonForm)("value","countrycode"),t.R7$(4),t.Y8G("readonly",n.AddbuttonForm)("value",null==(r=n.countryForm.get("countrycurrency"))?null:r.value),t.R7$(4),t.FS9("src",n.flag,t.B4B)}}function b(o,s){if(1&o&&(t.j41(0,"div",26),t.nrm(1,"img",27),t.j41(2,"div",28)(3,"h5",29),t.EFF(4),t.k0s(),t.j41(5,"h5",29),t.EFF(6),t.k0s(),t.j41(7,"h5",29),t.EFF(8),t.k0s(),t.j41(9,"h5",29),t.EFF(10),t.k0s()()()),2&o){const n=s.$implicit;t.R7$(1),t.FS9("src",n.flagImage,t.B4B),t.R7$(3),t.SpI("Country Name: ",n.countryName,""),t.R7$(2),t.SpI("Timezone: ",n.countryTimeZone,""),t.R7$(2),t.SpI("Country Code: ",n.countryCode,""),t.R7$(2),t.SpI("Country Currency: ",n.countryCurrency,"")}}let x=(()=>{class o{constructor(n,r,c,a,d){this.http=n,this._country=r,this.formbuilder=c,this.toastr=a,this.authService=d,this.AddbuttonForm=!1,this.addcountrydata={countryname:"",countrycurrency:"",countrytimezone:"",countrycode:"",flag:""},this.countryDataDB=[],this.search=""}ngOnInit(){this.fetchCountryDataAPI(),this.getDatafromDB(),this.countrySearch(),this.countryForm=this.formbuilder.group({countryname:["",e.k0.required],countrytimezone:["",e.k0.required],countrycode:["",e.k0.required],countrycurrency:["",e.k0.required],flag:["",e.k0.required]})}getDatafromDB(){this._country.getcountryData().subscribe({next:n=>{this.countryDataDB=n.countrydata},error:n=>{alert(n)}})}fetchCountryDataAPI(){this._country.fetchCountryAPI().subscribe({next:n=>{this.countryData=n},error:n=>{console.log(n)}})}onSelected(n){const r=this.countryData.find(c=>c.name.common===n);this.currenciesObj=r.currencies,this.currencyKeys=Object.keys(this.currenciesObj),this.firstCurrencyKey=this.currencyKeys[0],this.currencysymbol=this.currenciesObj[this.firstCurrencyKey],this.symbol=this.currencysymbol.symbol,this.flag=r.flags.png,r&&this.countryForm.patchValue({countryname:r.name.common,countrytimezone:r.timezones,countrycode:r.idd.root+r.idd.suffixes[0],countrycurrency:this.symbol,flag:r.flags.png})}OnSubmit(){if(this.countryForm.valid){const n=this.countryForm.value;this.addcountrydata={countryName:n.countryname,countryCurrency:n.countrycurrency,countryTimeZone:n.countrytimezone[0],countryCode:n.countrycode,flagImage:n.flag},this._country.addCountry(this.addcountrydata).subscribe({next:r=>{this.countryDataDB.push(r.countrydata),this.getDatafromDB(),this.countryForm.reset(),this.AddbuttonForm=!1,this.toastr.success(r.message)},error:r=>{console.log(r),this.toastr.warning(r.error.message)}})}}countrySearch(){this._country.searchCountry(this.search).subscribe({next:n=>{this.countryDataDB=n.countrydata},error:n=>{console.log(n)}})}toggleFormVisibility(){this.AddbuttonForm=!this.AddbuttonForm}cancel(){this.AddbuttonForm=!1,this.countryForm.reset()}resetTimer(){this.authService.resetInactivityTimer()}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(m.Qq),t.rXU(h),t.rXU(e.ok),t.rXU(p.tw),t.rXU(f.u))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-country"]],decls:13,vars:3,consts:[[1,"d-flex","justify-content-center"],["mat-button","","mat-stroked-button","","color","primary","id","showbtn",1,"m-4","d-flex","align-items-center","justify-content-center",3,"click"],["type","text","id","search","placeholder","Search by Country Name...",1,"form-control","m-4","w-25",3,"ngModel","ngModelChange"],["id","searchbtn",3,"click"],[1,"parentFormContainer"],["id","formContainer",4,"ngIf"],[1,"card-container","container"],["id","card-box",1,"container","d-flex","flex-wrap","align-items-center"],["class","m-4 card",4,"ngFor","ngForOf"],["id","formContainer"],[1,"mb-3"],[1,"container",3,"formGroup","ngSubmit"],[1,"dropdown"],["name","country",3,"change"],["country",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-label","d-flex","justify-content-start"],["type","text","formControlName","countryname","name","countryname",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrytimezone",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrycode",1,"form-control",3,"readonly","value"],["type","text","formControlName","countrycurrency",1,"form-control",3,"readonly","value"],[2,"width","100px",3,"src"],["type","submit","id","submitBtn",1,"btn","btn-primary","w-40"],[1,"btn","btn-primary","w-40",2,"margin-left","20px",3,"click"],[3,"value"],[1,"m-4","card"],["alt","Card image cap",1,"card-img-top",2,"width","200px","height","300px",3,"src"],[1,"card-body"],[1,"card-title"]],template:function(r,c){1&r&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return c.toggleFormVisibility()}),t.j41(2,"mat-icon"),t.EFF(3,"add_circle"),t.k0s(),t.EFF(4," Add Country "),t.k0s(),t.j41(5,"input",2),t.bIt("ngModelChange",function(d){return c.search=d}),t.k0s(),t.j41(6,"button",3),t.bIt("click",function(){return c.countrySearch()}),t.EFF(7,"Search"),t.k0s()(),t.j41(8,"div",4),t.DNE(9,C,35,11,"div",5),t.k0s(),t.j41(10,"div",6)(11,"div",7),t.DNE(12,b,11,5,"div",8),t.k0s()()),2&r&&(t.R7$(5),t.Y8G("ngModel",c.search),t.R7$(4),t.Y8G("ngIf",c.AddbuttonForm),t.R7$(3),t.Y8G("ngForOf",c.countryDataDB))},dependencies:[u.Sq,u.bT,e.qT,e.xH,e.y7,e.me,e.BC,e.cb,e.vS,e.j4,e.JD,y.An],styles:["h1[_ngcontent-%COMP%]{font-family:cursive;padding:40px;color:#fff}.parentFormContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}#formContainer[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:4px 4px 16px #000;width:90%;max-width:600px;padding:20px;margin:40px}#search-input[_ngcontent-%COMP%]{flex-grow:1;padding:5px}#showbtn[_ngcontent-%COMP%]{border-radius:5px;box-shadow:2px 2px 2px #4371e4;border:1px solid black}#searchbtn[_ngcontent-%COMP%]{padding:6px;background-color:#7200c4;color:#fff;border:none;cursor:pointer;border-radius:3px}#showbtn[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all linear .2s;z-index:1;box-shadow:2px 2px 20px #0000004d;cursor:pointer}.dropdown[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.dropdown[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:5px}@media screen and (max-width: 480px){#formContainer[_ngcontent-%COMP%]{width:90%;margin:20px}}@media screen and (max-width: 780px){#formContainer[_ngcontent-%COMP%]{width:80%;margin:20px}}.card-container[_ngcontent-%COMP%]{width:100%;margin-top:5%}#card-box[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.card[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #cccccc;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:200px;height:270px;transition:all linear .2s;margin:10px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:all linear .2s;z-index:1;box-shadow:2px 2px 20px #0000004d;cursor:pointer}@media screen and (max-width: 580px){.card[_ngcontent-%COMP%]{width:90%;height:auto}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100%;min-height:100%}}"]})}}return o})();var F=i(8498);const v=[{path:"",component:x,pathMatch:"full"}];let j=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[u.MD,F.iI.forChild(v),e.YN,e.X1,y.m_]})}}return o})()}}]);